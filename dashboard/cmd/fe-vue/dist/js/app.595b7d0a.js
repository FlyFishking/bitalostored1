(function(t){function e(e){for(var o,n,c=e[0],s=e[1],u=e[2],d=0,p=[];d<c.length;d++)n=c[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],o=!0,n=1;n<r.length;n++){var c=r[n];0!==a[c]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var o={},n={app:0},a={app:0},i=[];function c(t){return s.p+"js/"+({about:"about",home:"home",index:"index"}[t]||t)+"."+{about:"ea44a03a",home:"aa73b5da",index:"efe571aa"}[t]+".js"}function s(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(t){var e=[],r={home:1};n[t]?e.push(n[t]):0!==n[t]&&r[t]&&e.push(n[t]=new Promise((function(e,r){for(var o="css/"+({about:"about",home:"home",index:"index"}[t]||t)+"."+{about:"31d6cfe0",home:"04c383f4",index:"31d6cfe0"}[t]+".css",a=s.p+o,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===o||d===a))return e()}var p=document.getElementsByTagName("style");for(c=0;c<p.length;c++){u=p[c],d=u.getAttribute("data-href");if(d===o||d===a)return e()}var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",l.onload=e,l.onerror=function(e){var o=e&&e.target&&e.target.src||a,i=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete n[t],l.parentNode.removeChild(l),r(i)},l.href=a;var b=document.getElementsByTagName("head")[0];b.appendChild(l)})).then((function(){n[t]=0})));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var i=new Promise((function(e,r){o=a[t]=[e,r]}));e.push(o[2]=i);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,s.nc&&d.setAttribute("nonce",s.nc),d.src=c(t);var p=new Error;u=function(e){d.onerror=d.onload=null,clearTimeout(l);var r=a[t];if(0!==r){if(r){var o=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;p.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",p.name="ChunkLoadError",p.type=o,p.request=n,r[1](p)}a[t]=void 0}};var l=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(e)},s.m=t,s.c=o,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(r,o,function(e){return t[e]}.bind(null,o));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=e,u=u.slice();for(var p=0;p<u.length;p++)e(u[p]);var l=d;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"0613":function(t,e,r){"use strict";r.d(e,"b",(function(){return y})),r.d(e,"a",(function(){return x}));var o=r("2b0e"),n=r("2f62"),a=r("6011");const i={role:void 0},c={role:t=>t.role},s={[a["e"]]({commit:t},e){t(a["e"],e)}},u={[a["e"]]:(t,e)=>t.role=e};var d={namespaced:!0,state:i,getters:c,actions:s,mutations:u},p=r("4bb5"),l=r("66d7");const b={name:""},f={name:t=>t.name,xname:t=>Object(l["d"])(t.name)},m={[a["b"]]({commit:t},e){console.log(e),t(a["b"],e)}},g={[a["b"]]:(t,e)=>t.name=e};var O={namespaced:!0,state:b,getters:f,actions:m,mutations:g};const v={list:[],isOpen:!1},h={list:t=>t.list,isOpen:t=>t.isOpen},$={[a["a"]]:({commit:t},e)=>t(a["a"],e),[a["c"]]:({commit:t})=>t(a["c"]),[a["d"]]:({commit:t})=>t(a["d"])},j={[a["a"]]:(t,e)=>t.list.unshift(e),[a["c"]]:t=>t.isOpen=!1,[a["d"]]:t=>t.isOpen=!0};var w={namespaced:!0,state:v,getters:h,actions:$,mutations:j};o["default"].use(n["a"]);e["c"]=new n["a"].Store({modules:{user:d,bitalosproxy:O,server:w}});const y=Object(p["a"])("user"),x=(Object(p["a"])("bitalosproxy"),Object(p["a"])("server"))},6011:function(t,e,r){"use strict";r.d(e,"e",(function(){return o})),r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return c}));const o="SET_ROLE",n="SET_BITALOSPROXY",a="ADD_ITEM",i="SET_OPEN",c="SET_CLOSE"},"66d7":function(t,e,r){"use strict";r.d(e,"d",(function(){return s})),r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return d})),r.d(e,"c",(function(){return p}));var o=r("0b26"),n=r.n(o),a=r("0613"),i=r("a78e"),c=r.n(i);function s(t){return n()("Stored-XAuth-["+t+"]").substring(0,32)}function u(){return a["c"].getters["bitalosproxy/xname"]}function d(){return a["c"].getters["bitalosproxy/name"]}function p(){return c.a.get("utoken")}},"79f6":function(t,e,r){"use strict";r.d(e,"y",(function(){return d})),r.d(e,"D",(function(){return p})),r.d(e,"u",(function(){return l})),r.d(e,"v",(function(){return b})),r.d(e,"t",(function(){return f})),r.d(e,"g",(function(){return m})),r.d(e,"b",(function(){return g})),r.d(e,"n",(function(){return O})),r.d(e,"O",(function(){return v})),r.d(e,"s",(function(){return h})),r.d(e,"A",(function(){return $})),r.d(e,"K",(function(){return j})),r.d(e,"k",(function(){return w})),r.d(e,"i",(function(){return y})),r.d(e,"j",(function(){return x})),r.d(e,"B",(function(){return k})),r.d(e,"I",(function(){return D})),r.d(e,"l",(function(){return E})),r.d(e,"r",(function(){return L})),r.d(e,"F",(function(){return S})),r.d(e,"h",(function(){return T})),r.d(e,"C",(function(){return A})),r.d(e,"L",(function(){return P})),r.d(e,"q",(function(){return I})),r.d(e,"p",(function(){return _})),r.d(e,"a",(function(){return C})),r.d(e,"m",(function(){return N})),r.d(e,"c",(function(){return R})),r.d(e,"o",(function(){return B})),r.d(e,"J",(function(){return M})),r.d(e,"z",(function(){return G})),r.d(e,"M",(function(){return H})),r.d(e,"G",(function(){return q})),r.d(e,"H",(function(){return J})),r.d(e,"x",(function(){return U})),r.d(e,"P",(function(){return z})),r.d(e,"N",(function(){return F})),r.d(e,"w",(function(){return K})),r.d(e,"E",(function(){return X})),r.d(e,"d",(function(){return Y})),r.d(e,"f",(function(){return Q})),r.d(e,"e",(function(){return V}));var o=r("66d7"),n=r("bc3a"),a=r.n(n),i=r("0613"),c=r("6011"),s=r("d3fb"),u=r("6fc5");const d=()=>Object(s["a"])(Y("/clusters")),p=({username:t,password:e})=>Object(u["b"])("/login",{username:t,password:e}),l=()=>Object(u["a"])("/topom?forward="+Object(o["a"])()),b=()=>Object(u["a"])(`/api/topom/stats/${Object(o["b"])()}?forward=`+Object(o["a"])()),f=()=>Y("/constants"),m=t=>Q(`/api/topom/department/${Object(o["d"])(Object(o["a"])())}/${t}?forward=${Object(o["a"])()}`),g=(t,e)=>Q(`/api/topom/proxy/create/${Object(o["b"])()}/${t}/${e}?forward=${Object(o["a"])()}`),O=t=>Q(`/api/topom/proxy/remove/${Object(o["b"])()}/${t.token}/0?forward=${Object(o["a"])()}`),v=t=>Q(`/api/topom/proxy/reinit/${Object(o["b"])()}/${t.token}?forward=${Object(o["a"])()}`),h=t=>Q(`/api/topom/proxy/remove/${Object(o["b"])()}/${t.token}/1?forward=${Object(o["a"])()}`),$=()=>V(`/api/topom/proxy/stat/${Object(o["d"])(Object(o["a"])())}/hotkeys?forward=${Object(o["a"])()}`),j=()=>V(`/api/topom/proxy/stat/${Object(o["d"])(Object(o["a"])())}/slowkeys?forward=${Object(o["a"])()}`),w=t=>Q(`/api/topom/proxy/readcrosscloud/${Object(o["d"])(Object(o["a"])())}/${t}?forward=${Object(o["a"])()}`),y=({from:t,to:e,group:r,migrate:n})=>Q(`/api/topom/slots/action/create-range/${Object(o["b"])()}/${t}/${e}/${r}/${n}?forward=${Object(o["a"])()}`),x=({from:t,to:e,slots:r})=>Q(`/api/topom/slots/action/create-some/${Object(o["b"])()}/${t}/${e}/${r}?forward=${Object(o["a"])()}`),k=()=>Q(`/api/topom/slots/action/create/init/${Object(o["d"])(Object(o["a"])())}?forward=${Object(o["a"])()}`),D=t=>Y(`/api/topom/tools/whichgroupkey/${t}?forward=${Object(o["a"])()}`),E=(t,e)=>Q(`/api/topom/group/degradegroup/${Object(o["b"])()}/${t}/${e}?forward=${Object(o["a"])()}`),L=({groupId:t,server:e,value:r})=>Q(`/api/topom/group/lrucache/${Object(o["b"])()}/${t}/${e}/${r}?forward=${Object(o["a"])()}`),S=(t,e)=>Q(e?`/api/topom/group/action/remove/${Object(o["b"])()}/${t}?forward=${Object(o["a"])()}`:`/api/topom/group/action/create/${Object(o["b"])()}/${t}?forward=${Object(o["a"])()}`),T=(t,e)=>Q(`/api/topom/group/compact/${Object(o["b"])()}/${t}/${e}?forward=${Object(o["a"])()}`),A=t=>Q(`/api/topom/group/logcompact/${Object(o["b"])()}/${t}?forward=${Object(o["a"])()}`),P=()=>Q(`/api/topom/group/resync-all/${Object(o["b"])()}?forward=${Object(o["a"])()}`),I=()=>Q(`/api/topom/group/replica-groups-all/${Object(o["b"])()}/1?forward=${Object(o["a"])()}`),_=()=>Q(`/api/topom/group/replica-groups-all/${Object(o["b"])()}/0?forward=${Object(o["a"])()}`),C=t=>Q(`/api/topom/group/create/${Object(o["b"])()}/${t}?forward=${Object(o["a"])()}`),N=t=>Q(`/api/topom/group/remove/${Object(o["b"])()}/${t}?forward=${Object(o["a"])()}`),R=({groupId:t,server:e,cloudType:r,server_role:n})=>Q(`/api/topom/group/add/${Object(o["b"])()}/${t}/${e}/${r}/${n}?forward=${Object(o["a"])()}`),B=({groupId:t,server:e,nodeid:r})=>Q(`/api/topom/group/del/${Object(o["b"])()}/${t}/${e}/${r}?forward=${Object(o["a"])()}`),M=({groupId:t,server:e})=>V(`/api/topom/group/getclustermembership/${Object(o["b"])()}/${t}/${e}?forward=${Object(o["a"])()}`),G=({groupId:t,server:e,raftaddr:r,nodeid:n,model:a})=>Q(`/api/topom/group/mount/${Object(o["b"])()}/${t}/${e}/${r}/${n}/${a}?forward=${Object(o["a"])()}`),H=t=>Q(`/api/topom/group/resync/${Object(o["b"])()}/${t}?forward=${Object(o["a"])()}`),q=(t,e)=>Q(`/api/topom/group/promote/${Object(o["b"])()}/${t}/${e}?forward=${Object(o["a"])()}`),J=(t,e,r)=>Q(`/api/topom/group/replica-groups/${Object(o["b"])()}/${t}/${e}/${r}?forward=${Object(o["a"])()}`),U=()=>Y.get(`/api/topom/pconfig/list/${Object(o["b"])()}?forward=${Object(o["a"])()}`),z=t=>Y.put(`/api/topom/pconfig/update/${Object(o["b"])()}?forward=${Object(o["a"])()}`,t),F=()=>Y.put(`/api/topom/pconfig/resync-all/${Object(o["b"])()}?forward=${Object(o["a"])()}`),K=()=>Object(u["a"])(`/api/topom/migratelist/${Object(o["b"])()}?forward=${Object(o["a"])()}`),X=t=>Q(`/api/topom/slots/action/disabled/${Object(o["d"])(Object(o["a"])())}/${t}?forward=${Object(o["a"])()}`),Y=a.a.create({});Y.interceptors.request.use(t=>{if(Object(o["c"])())return t;location.assign("/#/login")}),Y.interceptors.response.use(t=>t,t=>{i["c"].dispatch("server/"+c["a"],{data:t.response?t.response.data:"403",url:t.config.url,type:"response",msg:t.response.data.errmsg?t.response.data.errmsg.cause:t.response.data,time:new Date}),i["c"].dispatch("server/"+c["d"])});const Q=Y.put,V=Y.get},cd49:function(t,e,r){"use strict";r.r(e);var o=r("2b0e"),n=r("79f6"),a=r("ebb6"),i=r("9ab4"),c=r("60a3"),s=r("0613"),u=r("6011");let d=class extends c["d"]{constructor(){super(...arguments),this.activator=null,this.openIndex=-1}mounted(){this.activator=document.getElementById("log-view")}render(){const t=arguments[0];return t("v-menu",{attrs:{transition:"slide-y-reverse-transition",activator:this.activator,value:this.isOpen,"open-on-click":!1,"close-on-content-click":!1,"max-height":"50vh",top:!0,"offset-y":!0},on:{input:this.closeDialog}},[t("v-card",{class:"log-dialog"},[this.list.map((e,r)=>t("v-card-text",{class:"text-no-wrap"+(0!==r&&" mt-0 pt-0")},[t("div",[t("b",["URL:"])," ",e.url]),t("div",[t("b",["ERROR:"])," ",e.msg]),t("div",[e.time.toLocaleTimeString()]),this.openIndex===r?t("div",[t("v-btn",{attrs:{"x-small":!0,text:!0},on:{click:this.closeDetail}},["hide"]),t("pre",[JSON.stringify(e.data,null,2)])]):t("v-btn",{attrs:{color:"primary","x-small":!0,text:!0},on:{click:()=>this.openDetail(r)}},["detail"]),r!==this.list.length-1&&t("v-divider",{class:"mt-2"})]))])])}closeDetail(){this.openIndex=-1,this.list.length<4&&(this.closeDialog(),this.$nextTick(()=>this.openDialog()))}openDetail(t){this.openIndex=t,this.list.length<4&&(this.closeDialog(),this.$nextTick(()=>this.openDialog()))}};Object(i["a"])([s["a"].Getter],d.prototype,"list",void 0),Object(i["a"])([s["a"].Getter],d.prototype,"isOpen",void 0),Object(i["a"])([s["a"].Action(u["c"])],d.prototype,"closeDialog",void 0),Object(i["a"])([s["a"].Action(u["d"])],d.prototype,"openDialog",void 0),d=Object(i["a"])([c["a"]],d);var p=d;let l=class extends c["d"]{render(){const t=arguments[0];return t("div",{style:{position:"absolute",bottom:"4px",width:"100%"},class:"d-flex justify-end"},[t("v-btn",{attrs:{"x-small":!0,text:!0,id:"log-view"},on:{click:this.toggleDialog}},[t("v-icon",{attrs:{color:"error"}},["mdi-alert"]),this.list.length])])}toggleDialog(){this.isOpen?this.closeDialog():this.openDialog()}};Object(i["a"])([s["a"].Getter],l.prototype,"list",void 0),Object(i["a"])([s["a"].Getter],l.prototype,"isOpen",void 0),Object(i["a"])([s["a"].Action(u["d"])],l.prototype,"openDialog",void 0),Object(i["a"])([s["a"].Action(u["c"])],l.prototype,"closeDialog",void 0),l=Object(i["a"])([c["a"]],l);var b=l,f=r("ce43");const m=o["default"].extend({subscriptions(){return{navList:Object(n["y"])().pipe(Object(a["a"])(({data:t})=>t.data))}},render(){const t=arguments[0];return t("v-app",["Login"!==this.$route.name&&t("v-navigation-drawer",{attrs:{permanent:!0,app:!0,width:200}},[t("v-toolbar",{attrs:{color:"primary darken-1",dark:!0,short:!0}},["Bitalosdashboard"]),t("v-list",[t("v-list-item",{attrs:{to:"index"}},["Home"]),this.navList&&this.navList.map(e=>t("v-list-group",[t("template",{slot:"activator"},[t("v-list-item-content",[t("v-list-item-title",[e.departmentName])])]),e.clusterList.map(e=>t("v-list-item",{attrs:{to:e}},[t("v-list-item-content",[t("v-list-item-title",[e])])]))]))]),t(b)]),"Login"!==this.$route.name&&t("v-app-bar",{attrs:{app:!0,color:"primary",short:!0}},[t("v-spacer")]),t("v-main",[t("router-view",{key:this.$route.path+(new Date).getTime()})]),t(p)])}});var g=o["default"].extend({render(){const t=arguments[0];return"Login"!==this.$route.name?t(m):t(f["default"])}}),O=r("8c4f"),v=r("66d7");const h=(t,e,r)=>{"Login"!==t.name?s["c"].getters["user/role"]||Object(v["c"])()?r():r("/login"):r()},$=(t,e,r)=>{"Home"===t.name&&t.params&&t.params.id&&s["c"].dispatch("bitalosproxy/"+u["b"],t.params.id),r()};o["default"].use(O["a"]);const j=[{path:"/login",name:"Login",component:()=>Promise.resolve().then(r.bind(null,"ce43"))},{path:"/index",name:"Index",component:()=>r.e("index").then(r.bind(null,"d504"))},{path:"/:id",name:"Home",component:()=>r.e("home").then(r.bind(null,"bb51"))},{path:"/about",name:"About",component:()=>r.e("about").then(r.bind(null,"f820"))}],w=new O["a"]({mode:"hash",base:"/",routes:j});w.beforeEach(h),w.beforeEach($);var y=w,x=r("ce19"),k=r("ce5b"),D=r.n(k);r("953f");o["default"].use(D.a);const E={theme:{dark:!1}};var L=new D.a(E),S=r("5c96"),T=r.n(S),A=(r("0fae"),r("d3b7"),r("4eb5")),P=r.n(A);r("41e6");P.a.config.autoSetContainer=!0,o["default"].use(P.a),o["default"].use(x["a"]),o["default"].use(T.a,{size:"mini"}),o["default"].config.productionTip=!1,new o["default"]({router:y,store:s["c"],render:t=>t(g),vuetify:L}).$mount("#app")},ce43:function(t,e,r){"use strict";r.r(e);r("14d9");var o=r("9ab4"),n=r("60a3"),a=r("79f6"),i=r("0613"),c=r("6011");let s=class extends n["d"]{constructor(){super(...arguments),this.username="",this.password=""}render(){const t=arguments[0];return t("v-app",[t("v-container",{class:"d-flex justify-center align-center"},[t("v-card",{attrs:{width:500},class:"mt-5"},[t("v-card-title",["Login"]),t("v-card-text",[t("v-row",[t("v-col",[t("v-text-field",{attrs:{label:"Username",autofocus:!0,value:this.username},on:{input:t=>this.username=t}})])]),t("v-row",[t("v-col",[t("v-text-field",{attrs:{label:"Password",value:this.password},on:{input:t=>this.password=t}})])]),t("v-row",[t("v-col",[t("v-btn",{attrs:{color:"primary"},on:{click:this.login}},["Login"])])])])])])])}async login(){const{username:t,password:e}=this;try{const{response:{errmsg:r,data:o}}=await Object(a["D"])({username:t,password:e}).toPromise();r.cause||(this.setRole(o.role),this.$router.push("/"))}catch(r){console.error(r)}}};Object(o["a"])([i["b"].Action(c["e"])],s.prototype,"setRole",void 0),s=Object(o["a"])([n["a"]],s),e["default"]=s},d3b7:function(t,e,r){}});
//# sourceMappingURL=app.595b7d0a.js.map